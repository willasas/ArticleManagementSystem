## **Apache 与 Nginx 对比**

#### 服务器介绍

**1.区别**

- Apache 和 NGINX 的主要区别在于其设计架构。Apache 使用进程驱动的方法，并为每个请求创建一个新线程。NGINX 使用事件驱动的体系结构来处理一个线程中的多个请求。

**2.Apache HTTP 服务器**

- Apache HTTP 服务器是一种开源跨平台 Web 服务器，也称为"httpd"和 Apache。他是 Apache 软件基金会管理其品牌和服务。服务器由 ASF 下的开放开发人员社区开发和维护。Apache 主要运行在 Linux 上，它支持全球 46% 的网站。它是 LAMP（Linux、Apache、MySQL、PHP）堆栈的关键组件。

**3.Nginx Web 服务器**

- Nginx 经常用作反向代理、负载均衡器、邮件代理和 HTTP 缓存。Apache 和 Nginx 都是 Linux 最常见的网络服务器。它们共同为网络流量的 50%以上提供服务。

| 模块/名称    | APACHE                                                                    | NGINX                                                           |
| ------------ | ------------------------------------------------------------------------- | --------------------------------------------------------------- |
| 基本架构     | 流程驱动方法：为每一个请求建立一个新线程                                  | 事件驱动方法：在一个线程内处理多个请求                          |
| 性能         | 静态内容：使用基于文件的方法提供静态内容 动态内容：处理服务器内的动态内容 | 静态内容：在提供静态内容时，Nginx 无敌 动态内容：不处理动态内容 |
| 操作系统支持 | 支持所有与 Unix 一样的操作系统\(包括 Linux 和 BSD\),完全支持 MS\-Windows  | 支持几乎所有与 Unix 一样的操作系统，部分支持 Windows            |
| 配置         | 通过\.htaccess 文件允许基于每个目录进行其他配置                           | 不允许进行其他配置                                              |
| 请求解释     | 通过文件系统位置                                                          | 通过 URI 来解释请求                                             |
| 功能         | 60 个可动态加载的官方模块，可打开/关闭                                    | 第三方核心模块（不可动态加载）                                  |
| 灵活性       | 支持通过动态模块自定义 Web 服务器                                         | NGINX 1.9.11 开始增加加载动态模块支持                           |
| 安全         | 非常安全                                                                  | 最少的代码实现更好的安全                                        |
| 支持         | 社区支持通过邮件列表、IRC 和堆栈溢出完成                                  | 通过邮件列表、IRC、堆栈溢出和论坛提供社区支持                   |

## **基本架构**

**1. Apache**

- 流程驱动方法
- 为每个请求创建一个新线程（采用多线程方法）
- 主要的 Apache MPM:
  - 过程（预叉）MPM
  - 工人 MPM
  - 事件 MPM

**2. Nginx（更加轻量级）**

- 事件驱动方法（支持异步处理请求）
- 在一个线程内处理多个请求

## **性能**

**1、静态内容处理**

- 静态内容或文件通常是存储在服务器计算机上磁盘上的文件，例如 CSS 文件、JavaScripts 文件或图像。Apache 使用其传统的基于文件的方法处理静态内容。

- 由于 Nginx 的设计架构更有能力处理负载，因此在提供静态内容方面速度要快得多。根据高达 1000 个同时连接的基准测试，其性能比 Apache 快 2.5 倍。Nginx 为静态资源服务，而 PHP 无需了解这一点。另一方面，Apache 以昂贵的开销处理所有这些请求。这使得 Nginx 更加有效，对系统资源的要求更低。

**2、动态内容处理**

- Apache 可以在 Web 服务器本身中处理动态内容，而无需依赖任何外部组件。

- Nginx 无法像 Apache 那样在 Web 服务器中处理动态内容。所有具有动态网页内容的请求都传递到外部进程（例如 PHP-FPM）执行。Nginx 等待最终内容返回并交付给客户端。

- 当与 SCGI 处理程序和 FastCGI 模块一起使用时，NGINX 可以为动态内容提供服务。

## **操作系统支持**

- Apache 运行在各种与 Unix 一样的系统（例如 Linux 或 BSD）上运行，并且完全支持微软 Windows。

- 操作系统支持可能是需要考虑的重要一点，尤其是在比较 Apache 与 Nginx 时。但是，两者在这里几乎相似。

## **分布式/集中配置**

**1、限制每张表上的索引数量，建议单张表索引不超过 5 个**

- Apache 允许非特权用户控制其网站的某些方面，而无需授予他们编辑主配置的权限。

- Nginx 不允许目录配置，它可以比 Apache 更快地提供请求。它不需要搜索 .htaccess 文件并解释用户制作的 req。

## **请求解释**

- Apache 通过传递文件系统位置，提供解释要求的能力。作为文件系统位置的物理资源，可能需要更抽象的评估。它将请求作为文件系统位置传递。当然，Apache 确实使用 URI 位置，但它们通常用于更抽象的资源。在创建或配置虚拟主机时，Apache 使用文档根目录下的目录块。

- Nginx 不提供指定配置的机制。对于文件系统目录，则传递其 URI 本身。将请求（URI）而不是文件系统位置传递，使 Nginx 能够轻松地在 Web 和代理服务器中运行。它通过布局如何响应差异请求模式来简单配置。

## **功能模块**

- Apache 服务器具有一组丰富的功能，可以通过安装 60 个官方模块之一来启用这些功能。还有许多其他非官方的模块，可以很容易地在互联网上找到。

- 其模块系统允许您动态加载或卸载模块，以满足您的需求。其模块可以打开或关闭以添加或删除功能，并连接到主服务器。

- NGiNX – 重要性不高的功能和模块使它比 Apache 更轻、更智能、更好的 Web 服务器。

- NGINX 还提供 Web 服务器的所有核心功能，而不会牺牲成功所需的轻量级和高性能特性。

## **灵活性**

- Apache 可以通过骑乘模块对 Web 服务器进行自定义。Apache 的动态模块加载时间最长，因此所有 Apache 模块都支持此功能。

- NGINX 1.9.11 开始增加加载动态模块支持

## **安全**

- Apache 确保所有在其服务器上运行的网站都是安全的，不会受到任何伤害和黑客攻击。因此，它提供了用于 DDoS 攻击处理的配置提示，以及用于响应 HTTP DoS、DDoS 或暴力攻击的 mod_evasive 模块。

- NGINX 的代码库明显小了几个数量级，所以从前瞻性的安全角度来看，这绝对是一个很大的优势。

## **支持**

- 两者的支持几乎相同。两个 Web 服务器都很棒。

## **选择**

- Apache 和 Nginx 都无法被对方取代， 他们有他们的强弱。在了解好处、限制和差异之后，选择最适合您的 Web 服务器即可。

#### 注意事项
