## **环境说明**

#### 准备工作

**1. 单播(unicast)**

- 即对特定的主机进行数据传送。例如给某一个主机发送 IP 数据包。这时候，数据链路层给出的数据头里面是非常具体的目的地址，对于以太网来 说，就是网卡的 MAC 地址（不是 FF-FF-FF-FF-FF-FF 这样的地址）。现在的具有路由功能的主机应该可以将单播数据定向转发，而目的主机的网 络接口则可以过滤掉和自己 MAC 地址不一致的数据。

**2. 广播(broadcast)**

- 广播是主机针对某一个网络上的所有主机发送数据包。这个网络可能是网络，可能是子网，还可能是所有的子网。如果是网络，例如 A 类网址的广播就是 netid.255.255.255，如果是子网，则是 netid.netid.subnetid.255；如果是所有的子网（B 类 IP）则是则是 netid.netid.255.255。广播所用的 MAC 地址 FF-FF-FF-FF-FF-FF。网络内所有的主机都会收到这个广播数据，网卡只要把 MAC 地址为 FF-FF-FF-FF-FF-FF 的数据交给内核就可以了。一般说来 ARP，或者路由协议 RIP 应该是以广播的形式播发的。

**3. 多播(multicast)**

- 可以说广播是多播的特例，多播就是给一组特定的主机（多播组）发送数据，这样，数据的播发范围会小一些(实际上播发的范围一点也没有变小)，多播的 MAC 地址是最高字节的低位为一，例 如 01-00-00-00-00-00。多播组的地址是 D 类 IP，规定是 224.0.0.0-239.255.255.255。
  然多播比较特殊，但是究其原理，多播的数据还是要通过数据链路层进行 MAC 地址绑定然后进行发送。所以一个以太网卡在绑定了一个多播 IP 地址之后，必 定还要绑定一个多播的 MAC 地址，才能使得其可以像单播那样工作。这个多播的 IP 和多播 MAC 地址有一个对应的算法，这个对应不是一一对应的，主机还是要对多播数据进行过滤。

**4. IGMP 协议**

- IGMP 的作用在于，让其他所有需要知道自己处于哪个多播组的主机和路由器知道自己的状态。一般多播路由器根本不需要知道某一个多播组里面有多少个主机，而只要知道自己的子网内还有没有处于某个多播组的主机就可以了。只要某一个多播组还有一台主机，多播路由器就会把数据传输出去，这样，接受方就会通过网卡过滤功能来得到自己想要的数据。为了知道多播组的信息，多播路由器需要定时的发送 IGMP 查询，IGMP 的格式可以看书，各个多播组里面的主机要根据查询来回复自己的状态。路由器来决定有几个多播组，自己要对某一个多播组发送什么样的数据。
  这种查询回应数据报的 TTL 一般是 1，而且就算是出错也不产生 ICMP 差错（没必要）。

## **注意事项**
